────────────────────────────────────────────────────────────────────────────────

  🌸 屎山代码分析报告 🌸

────────────────────────────────────────────────────────────────────────────────

  总体评分: 31.44 / 100 - 有点臭味，但还不至于熏死人
  屎山等级: 偶有异味 - 基本没事，但是有伤风化


◆ 评分指标详情

  ✓✓ 循环复杂度            8.29分     结构清晰，不绕弯子，赞
  ✓✓ 状态管理             9.65分     状态管理清晰，变量作用域合理，状态可预测
  ✓ 命名规范             25.00分    命名还行，有些得猜
  ○ 错误处理             35.00分    有处理，但处理得跟没处理一样
  ○ 代码结构             45.00分    结构还行，但有点混乱
  • 注释覆盖率            50.92分    注释稀薄，读者全靠脑补
  • 代码重复度            55.00分    有点重复，抽象一下不难吧

  评分计算: (8.29×0.25 + 9.65×0.15 + 25.00×0.10 + 35.00×0.15 + 45.00×0.20 + 50.92×0.15 + 55.00×0.15) ÷ 1.15 = 31.44


◆ 全部代码文件分析

  1. ./internal/services/file_service.go    (屎气指数: 48.35)
     🔄 复杂度问题: 14   🏷️  命名问题: 1   🏗️  结构问题: 1
     ⚠️  其他问题: 8

     ⚠️  函数 'UploadFile' () 极度过长 (195 行)，必须拆分
     🔄 函数 'UploadFile' () 复杂度严重过高 (22)，必须简化
     🏗️  函数 'UploadFile' () 参数过多 (6 个)，建议使用结构体封装
     ⚠️  函数 'CreateFolder' () 过长 (59 行)，建议拆分
     ⚠️  函数 'DownloadFile' () 过长 (79 行)，建议拆分
     🔄 函数 'DownloadFile' () 复杂度严重过高 (17)，必须简化
     ⚠️  函数 'DownloadFolder' () 极度过长 (108 行)，必须拆分
     🔄 函数 'DownloadFolder' () 复杂度过高 (13)，建议简化
     ⚠️  函数 'SoftDeleteFile' () 过长 (75 行)，建议拆分
     🔄 函数 'SoftDeleteFile' () 复杂度过高 (12)，建议简化
     ⚠️  函数 'PermanentDeleteFile' () 极度过长 (135 行)，必须拆分
     🔄 函数 'PermanentDeleteFile' () 复杂度严重过高 (25)，必须简化
     ⚠️  函数 'RestoreFile' () 极度过长 (107 行)，必须拆分
     🔄 函数 'RestoreFile' () 复杂度严重过高 (16)，必须简化
     🏷️  函数 'RenameFile' () 过长 (72 行)，建议拆分
     ⚠️  函数 'MoveFile' () 极度过长 (146 行)，必须拆分
     🔄 函数 'MoveFile' () 复杂度严重过高 (22)，必须简化
     🔄 函数 UploadFile 的循环复杂度过高 (22)，考虑重构
     🔄 函数 DownloadFile 的循环复杂度过高 (17)，考虑重构
     🔄 函数 DownloadFolder 的循环复杂度较高 (13)，建议简化
     🔄 函数 SoftDeleteFile 的循环复杂度较高 (12)，建议简化
     🔄 函数 PermanentDeleteFile 的循环复杂度过高 (25)，考虑重构
     🔄 函数 RestoreFile 的循环复杂度过高 (16)，考虑重构
     🔄 函数 MoveFile 的循环复杂度过高 (22)，考虑重构

  2. ./internal/handlers/file.go            (屎气指数: 40.20)
     🔄 复杂度问题: 4   🏷️  命名问题: 1   ⚠️  其他问题: 8

     🔄 函数 DownloadFile 的循环复杂度较高 (14)，建议简化
     🔄 函数 MoveFile 的循环复杂度较高 (13)，建议简化
     ⚠️  函数 'ListUserFiles' () 较长 (32 行)，可考虑重构
     ⚠️  函数 'UploadFile' () 过长 (83 行)，建议拆分
     ⚠️  函数 'CreateFolder' () 较长 (38 行)，可考虑重构
     ⚠️  函数 'DownloadFile' () 过长 (90 行)，建议拆分
     🔄 函数 'DownloadFile' () 复杂度过高 (14)，建议简化
     ⚠️  函数 'DownloadFolder' () 过长 (61 行)，建议拆分
     ⚠️  函数 'PermanentDeleteFile' () 较长 (35 行)，可考虑重构
     ⚠️  函数 'RestoreFile' () 较长 (39 行)，可考虑重构
     🏷️  函数 'RenameFile' () 过长 (57 行)，建议拆分
     ⚠️  函数 'MoveFile' () 过长 (63 行)，建议拆分
     🔄 函数 'MoveFile' () 复杂度过高 (13)，建议简化

  3. ./internal/services/helpers.go         (屎气指数: 38.96)
     🔄 复杂度问题: 2   🏷️  命名问题: 1   ⚠️  其他问题: 3

     🔄 函数 resolveFileNameConflict 的循环复杂度较高 (11)，建议简化
     ⚠️  函数 'collectAllChildren' () 过长 (52 行)，建议拆分
     🏷️  函数 'resolveFileNameConflict' () 较长 (48 行)，可考虑重构
     🔄 函数 'resolveFileNameConflict' () 复杂度过高 (11)，建议简化
     ⚠️  函数 'ValidateParentFolder' () 较长 (40 行)，可考虑重构
     ⚠️  函数 'getRelativePathInZip' () 较长 (47 行)，可考虑重构

  4. ./internal/middlewares/auth.go         (屎气指数: 38.43)
     ⚠️  其他问题: 1

     ⚠️  函数 'AuthMiddleware' () 较长 (44 行)，可考虑重构

  5. ./internal/services/auth_serivce.go    (屎气指数: 37.52)
     ⚠️  其他问题: 2

     ⚠️  函数 'RegisterUser' () 较长 (43 行)，可考虑重构
     ⚠️  函数 'LoginUser' () 较长 (45 行)，可考虑重构

  6. ./pkg/utils/password.go                (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (0.00%)，几乎没有注释

  7. ./src/router/index.ts                  (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (1.54%)，几乎没有注释

  8. ./src/api/file.ts                      (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (0.00%)，几乎没有注释

  9. ./pkg/xerr/msg.go                      (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (0.00%)，几乎没有注释

  10. ./go-clouddisk/docs/docs.go            (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (0.43%)，几乎没有注释

  11. ./src/api/auth.ts                      (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (0.00%)，几乎没有注释

  12. ./src/stores/file.ts                   (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (0.00%)，几乎没有注释

  13. ./web/src/main.js                      (屎气指数: 34.78)
     📝 注释问题: 1

     📝 代码注释率极低 (0.00%)，几乎没有注释

  14. ./cmd/server/main.go                   (屎气指数: 34.39)
     ⚠️  其他问题: 1

     ⚠️  函数 'main' () 过长 (72 行)，建议拆分

  15. ./internal/database/minio.go           (屎气指数: 34.39)
     ⚠️  其他问题: 1

     ⚠️  函数 'InitMinioClient' () 较长 (45 行)，可考虑重构

  16. ./internal/database/elasticsearch.go   (屎气指数: 34.26)
     📝 注释问题: 1

     📝 代码注释率较低 (7.69%)，建议增加注释

  17. ./go-clouddisk/web/vite.config.js      (屎气指数: 33.48)
     📝 注释问题: 1

     📝 代码注释率极低 (3.70%)，几乎没有注释

  18. ./src/stores/user.ts                   (屎气指数: 33.48)
     📝 注释问题: 1

     📝 代码注释率极低 (2.90%)，几乎没有注释

  19. ./web/src/main.ts                      (屎气指数: 33.48)
     📝 注释问题: 1

     📝 代码注释率极低 (4.35%)，几乎没有注释

  20. ./internal/config/config.go            (屎气指数: 30.35)
     ⚠️  其他问题: 1

     ⚠️  函数 'LoadConfig' () 过长 (59 行)，建议拆分

  21. ./go-clouddisk/web/tailwind.config.js  (屎气指数: 30.22)
     📝 注释问题: 1

     📝 代码注释率较低 (9.09%)，建议增加注释

  22. ./internal/services/user_service.go    (屎气指数: 30.22)
     📝 注释问题: 1

     📝 代码注释率较低 (8.51%)，建议增加注释

  23. ./pkg/ginutils/user_content.go         (屎气指数: 30.22)
     📝 注释问题: 1

     📝 代码注释率较低 (8.00%)，建议增加注释

  24. ./internal/repositories/user_repo.go   (屎气指数: 30.22)
     📝 注释问题: 1

     📝 代码注释率较低 (7.14%)，建议增加注释

  25. ./internal/router/router.go            (屎气指数: 29.57)
     ⚠️  其他问题: 1

     ⚠️  函数 'InitRouter' () 过长 (69 行)，建议拆分

  26. ./internal/database/mysql.go           (屎气指数: 27.61)

     ✓ 代码质量良好，没有明显问题

  27. ./src/api/http.ts                      (屎气指数: 27.61)

     ✓ 代码质量良好，没有明显问题

  28. ./internal/models/share_link.go        (屎气指数: 27.61)

     ✓ 代码质量良好，没有明显问题

  29. ./pkg/logger/logger.go                 (屎气指数: 27.61)

     ✓ 代码质量良好，没有明显问题

  30. ./internal/models/user.go              (屎气指数: 27.61)

     ✓ 代码质量良好，没有明显问题

  31. ./internal/handlers/auth.go            (屎气指数: 26.70)
     ⚠️  其他问题: 1

     ⚠️  函数 'Register' () 较长 (34 行)，可考虑重构

  32. ./internal/handlers/user.go            (屎气指数: 25.78)

     ✓ 代码质量良好，没有明显问题

  33. ./pkg/utils/jwt.go                     (屎气指数: 25.00)
     🏗️  结构问题: 1

     🏗️  函数 'GenerateToken' () 参数过多 (6 个)，建议使用结构体封装

  34. ./internal/repositories/file_repo.go   (屎气指数: 25.00)

     ✓ 代码质量良好，没有明显问题

  35. ./internal/models/file.go              (屎气指数: 23.04)

     ✓ 代码质量良好，没有明显问题

  36. ./pkg/xerr/code.go                     (屎气指数: 21.74)

     ✓ 代码质量良好，没有明显问题

  37. ./pkg/storage/storage.go               (屎气指数: 21.74)

     ✓ 代码质量良好，没有明显问题

  38. ./pkg/xerr/response.go                 (屎气指数: 21.74)

     ✓ 代码质量良好，没有明显问题

◆ 诊断结论

  🌸 偶有异味 - 基本没事，但是有伤风化

  👍 继续保持，你是编码界的一股清流，代码洁癖者的骄傲


◆ 📊 基本统计:

  📊 📊 基本统计:
    总文件数:           38
    总代码行:           4710
    总问题数:           68

  🔍 🔍 指标详细信息:

    【循环复杂度          】(权重: 0.25)
      描述: 测量函数的控制流复杂度，复杂度越高，代码越难理解和测试
      得分: 8.29/100

    【状态管理           】(权重: 0.15)
      描述: 检测函数长度及状态变量管理，合理的函数长度和状态管理能提高代码可维护性
      得分: 9.65/100

    【命名规范           】(权重: 0.10)
      描述: 检测代码中的命名规范，良好的命名能提高代码可读性
      得分: 25.00/100

    【错误处理           】(权重: 0.15)
      描述: 检测代码中的错误处理情况，良好的错误处理能提高代码的健壮性
      得分: 35.00/100

    【代码结构           】(权重: 0.20)
      描述: 检测代码的嵌套深度和引用复杂度，评估结构清晰度
      得分: 45.00/100

    【注释覆盖率          】(权重: 0.15)
      描述: 检测代码的注释覆盖率，良好的注释能提高代码可读性和可维护性
      得分: 50.92/100

    【代码重复度          】(权重: 0.15)
      描述: 评估代码中重复逻辑的比例，重复代码越多，越需要抽象和重构
      得分: 55.00/100

────────────────────────────────────────────────────────────────────────────────